<!doctype html>
<html>
 <head>
 <title>Learning Javascript</title>

 <meta charset="utf-8" />
 <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1" />
<style type="text/css">

#box
{
	display: none;
	border: 1px solid black;
	position: relative;
	-moz-border-radius: 50%;
	-webkit-border-radius: 50%;
	border-radius: 50%;
}

#field
{
	width: 800px;
	height: 800px;
	margin: 0 auto;
	border: 1px solid black;
}

#endBox
{
	display: none;
}

#endBox p
{
	color: red;
	font-size: 20px;
}


</style>


 </head>

 <body>

<div id = "field">
	<p id = "timeContainer">Your time: <span id="yourTime"></span></p>

	<div id="box"></div>
	<div id="endBox">
		<p>Your average reaction time is <span id="averageReactionTime"> </span></p>
		<p>Best time: <span id="bestReactionTime"></span></p>
	</div>

</div>


 <script type="text/javascript">
 var clickedTime;
 var createdTime;
 var reactionTime;
 var clickCounter = 0;
 var averageReactionTime;
 var sum = 0;
 var timesArray = new Array();
 var bestReactionTime = 0;

 function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

function getRandomCoordinates()
{
	var top = Math.floor(Math.random() * 80);
	var left = Math.floor(Math.random() * 80);
	var coordinates = new Array();
	coordinates[0] = top;
	coordinates[1] = left;
	return coordinates;
}


 function makeBox() {

 	var timeout = Math.floor(Math.random() * (3000 - 1) + 1);

 	setTimeout(function()
 	{
 		var radius = Math.floor(Math.random() * (120) + 10);
 		document.getElementById("box").style.display = "block";
 		document.getElementById("box").style.height = radius + "px";
 		document.getElementById("box").style.width = radius + "px";
		document.getElementById("box").style.top = getRandomCoordinates()[0] + "%";
		document.getElementById("box").style.left = getRandomCoordinates()[1] + "%";
 		document.getElementById("box").style.background = getRandomColor();
 		createdTime = Date.now();

 	}, timeout);


	}
 
 	
 
 	document.getElementById("box").onclick = function()
 	{
 		
	 		clickedTime = Date.now();
	 		reactionTime = (clickedTime - createdTime)/1000;
	 		document.getElementById("yourTime").innerHTML = reactionTime;
	 		this.style.display = "none";
	 		timesArray.push(reactionTime);
	 		console.log(timesArray);
	 		clickCounter++;

	 		if(clickCounter < 3)
	 		{
	 			makeBox();
	 			
	 		}

	 		else
	 		{

	 			sum = timesArray.reduce(function(a, b) { return a + b; });
	 			averageReactionTime = sum / timesArray.length;
	 			averageReactionTime = Math.round(averageReactionTime * 1000) / 1000;
	 			bestReactionTime = Math.min.apply(Math, timesArray);
	 			document.getElementById("box").style.display = "none";
	 			document.getElementById("timeContainer").style.display = "none";
	 			document.getElementById("endBox").style.display = "block";
	 			document.getElementById("averageReactionTime").innerHTML = averageReactionTime;
	 			document.getElementById("bestReactionTime").innerHTML = bestReactionTime;
	 		}


 	}

 	makeBox();

 	



 </script>

 </body>
</html>